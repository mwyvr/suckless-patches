From 9926234e53bad599b365b231a9dbb5268d675b42 Mon Sep 17 00:00:00 2001
From: Mike Watkins <python@mikewatkins.ca>
Date: Tue, 4 Jan 2022 11:29:09 -0800
Subject: [PATCH] XSetClassHint 'slock' for compositor users

---
 slock.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/slock.c b/slock.c
index 5ae738c..55cfbdf 100644
--- a/slock.c
+++ b/slock.c
@@ -14,6 +14,7 @@
 #include <string.h>
 #include <unistd.h>
 #include <sys/types.h>
+#include <X11/Xatom.h>
 #include <X11/extensions/Xrandr.h>
 #include <X11/keysym.h>
 #include <X11/Xlib.h>
@@ -255,6 +256,8 @@ lockscreen(Display *dpy, struct xrandr *rr, int screen)
 	invisible = XCreatePixmapCursor(dpy, lock->pmap, lock->pmap,
 	                                &color, &color, 0, 0);
 	XDefineCursor(dpy, lock->win, invisible);
+	XClassHint ch = {"slock", "slock"};
+	XSetClassHint(dpy, lock->win, &ch);
 
 	/* Try to grab mouse pointer *and* keyboard for 600ms, else fail the lock */
 	for (i = 0, ptgrab = kbgrab = -1; i < 6; i++) {
-- 
2.34.1

